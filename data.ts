
import { SchoolData } from './types';

const csvData = `時間戳記,年份,天主教學校,學生人數,教職員總人數,公教教職員人數,非公教教職員人數,公教教職員人數百分比
2025/11/11 上午 10:11:11,1953,81,28610,,,,
2025/11/11 上午 10:11:38,1954,58,36721,,,,
2025/11/11 上午 10:13:19,1955,135,47908,,,,
2025/11/11 上午 10:15:54,1956,135,47908,,,,
2025/11/11 上午 10:16:24,1957,141,61474,,,,
2025/11/11 上午 10:16:54,1958,150,64719,,,,
2025/11/11 上午 10:19:10,1959,152,74665,2231,,,
2025/11/11 上午 10:21:40,1960,156,84632,2361,,,
2025/11/11 上午 10:22:18,1961,168,96695,2630,,,
2025/11/11 上午 10:22:52,1962,189,104462,3067,,,
2025/11/11 上午 10:23:29,1963,198,128689,3373,2400,973,71.15
2025/11/11 上午 10:30:18,1964,192,133687,3922,2696,1226,68.74
2025/11/11 上午 10:31:03,1965,203,148651,4389,3003,1386,68.42
2025/11/11 上午 10:32:01,1966,208,163692,4741,2999,1743,63.26
2025/11/11 上午 10:32:50,1967,221,179462,5082,3301,1781,64.95
2025/11/11 上午 10:33:47,1968,225,191477,5331,3403,1928,63.83
2025/11/11 上午 10:34:30,1969,251,211548,6364,3694,2207,58.05
2025/11/11 上午 10:35:14,1970,263,225492,6715,3780,2472,56.29
2025/11/11 上午 10:36:03,1971,290,235123,7094,3781,2774,53.3
2025/11/11 上午 10:36:52,1972,283,243857,7335,3799,3014,51.79
2025/11/11 上午 10:37:37,1973,289,249084,,,,
2025/11/11 上午 10:38:12,1974,308,262790,,,,
2025/11/11 上午 10:38:39,1975,301,262947,,,,
2025/11/11 上午 10:39:14,1976,310,274238,8278,,,
2025/11/11 上午 10:39:53,1977,309,272602,8438,,,
2025/11/11 上午 10:40:19,1978,310,267027,,,,
2025/11/11 上午 10:40:52,1979,318,281271,8847,,,
2025/11/11 上午 10:41:18,1980,304,278920,8928,,,
2025/11/11 上午 10:41:51,1981,305,292695,9204,,,
2025/11/11 上午 10:42:47,1982,309,302699,9856,3975,,40.33
2025/11/11 上午 10:43:32,1983,313,309296,10180,3929,,38.6
2025/11/11 上午 10:44:16,1984,311,331778,10521,3916,,37.22
2025/11/11 上午 10:45:00,1985,300,321173,10386,3886,,37.42
2025/11/11 上午 10:45:47,1986,291,308075,10625,3886,,36.57
2025/11/11 上午 10:46:28,1987,291,304522,10518,3870,,36.79
2025/11/11 上午 10:47:09,1988,285,312396,10566,3758,,35.57
2025/11/11 上午 10:47:48,1989,284,314190,10727,3660,,34.12
2025/11/11 上午 10:48:44,1990,280,313422,10658,3488,,32.73
2025/11/11 上午 10:49:26,1991,278,309981,10715,3406,,31.79
2025/11/11 上午 10:50:34,1992,270,315353,11019,3278,,29.75
2025/11/11 上午 10:51:10,1993,270,306834,10835,3213,,29.65
2025/11/11 上午 10:51:50,1994,272,290757,10968,3308,,30.16
2025/11/11 上午 10:52:28,1995,327,289604,11096,3265,,29.43
2025/11/11 上午 10:53:10,1996,329,280149,11113,2979,,26.81
2025/11/11 上午 10:53:54,1997,327,277447,11093,3214,,28.97
2025/11/11 上午 10:54:40,1998,322,290441,11524,3029,,26.28
2025/11/11 上午 10:55:26,1999,323,289391,11645,3175,,27.26
2025/11/11 上午 10:56:08,2000,323,285327,11724,3209,,27.37
2025/11/11 上午 10:56:50,2001,314,277616,12172,3154,,25.91
2025/11/11 上午 10:57:50,2002,320,285996,12072,3189,,26.42
2025/11/11 上午 10:58:31,2003,317,285996,12167,3166,,26.02
2025/11/11 上午 10:59:24,2004,313,263792,11957,2974,,24.87
2025/11/11 上午 11:00:17,2005,309,249620,11594,3100,,26.74
2025/11/11 上午 11:01:04,2006,297,240007,11913,3117,,26.16
2025/11/11 上午 11:01:38,2007,283,219615,11588,3052,,26.34
2025/11/11 上午 11:02:13,2008,275,209711,11539,3055,,26.48
2025/11/11 上午 11:04:03,2009,274,202291,11594,2949,,25.44
2025/11/11 上午 11:04:46,2010,278,191382,11612,2962,,25.51
2025/11/11 上午 11:05:22,2011,276,189575,11794,2959,,25.09
2025/11/11 上午 11:06:19,2012,273,173704,11431,2910,,25.46
2025/11/11 上午 11:06:56,2013,264,165781,11278,2885,,25.58
2025/11/11 上午 11:07:31,2014,256,158283,11276,2875,,25.5
2025/11/11 上午 11:08:08,2015,252,149626,11436,2879,,25.17
2025/11/11 上午 11:08:45,2016,249,150640,11349,2890,,25.46
2025/11/11 上午 11:09:28,2017,251,150464,11593,2898,,25
2025/11/11 上午 11:10:29,2018,248,147469,11742,2926,,24.92
2025/11/11 上午 11:11:10,2019,250,148186,12182,2904,,23.84
2025/11/11 上午 11:11:47,2020,249,145875,12208,2902,,23.77
2025/11/11 上午 11:12:21,2021,249,141857,11938,2789,,23.36
2025/11/11 上午 11:12:55,2022,249,136804,12146,2674,,22.02
2025/11/11 上午 11:13:42,2023,249,134824,12183,2658,,21.82
2025/11/11 上午 11:14:33,2024,245,136472,12243,2543,,20.77`;

const parseCSV = (): SchoolData[] => {
  const lines = csvData.trim().split('\n');
  const header = lines.shift(); // Remove header
  if (!header) return [];

  return lines.map(line => {
    const values = line.split(',');
    const getNumberOrNull = (index: number) => {
      const value = values[index]?.trim();
      return value ? parseFloat(value) : null;
    };

    return {
      year: parseInt(values[1], 10),
      schoolCount: parseInt(values[2], 10),
      studentCount: parseInt(values[3], 10),
      totalStaff: getNumberOrNull(4),
      catholicStaff: getNumberOrNull(5),
      nonCatholicStaff: getNumberOrNull(6),
      catholicStaffPercentage: getNumberOrNull(7),
    };
  });
};

export const ALL_SCHOOL_DATA = parseCSV();
export const YEARS = ALL_SCHOOL_DATA.map(d => d.year);
export const MIN_YEAR = Math.min(...YEARS);
export const MAX_YEAR = Math.max(...YEARS);
